#!/bin/bash
# -----------------------------------------------------------------------
# function:
# 设置和显示mysql的用户名和密码
# /root/mode/.do1au   # 显示当前所有的用户及密码
# /root/mode/.do1au root deviskafia # 用户名root的密码设置为deviskaifa
# -----------------------------------------------------------------------

. /root/mode/mysqldip

#

H1="$1"
H2=${2:-deviskaifa}

# display

/root/mode/modemsg "***" "$HMYSQLDIP2" more
/root/mode/seecfg $HMYSQLDIP "select user,host,password from user order by host desc,user desc"

# display only

[ -z "$H1" ] && exit 1

# set and display again 

/root/mode/seecfg $HMYSQLDIP "grant all on *.* to $H1 identified by '$H2' with grant option;flush privileges" 
/root/mode/modemsg "***" "$HMYSQLDIP2" more
/root/mode/seecfg $HMYSQLDIP "select user,host,password from user order by host desc,user desc"

# end


